<ng-include src="'/html/editPerson.html'"></ng-include>

<div class="row col-xs-12">
	
	<div class="col-xs-6">
		<h3>Persons</h3>
	</div>
	
	<table class="table table-stripped table-hover">
					
		<thead class="thead-default">
			<tr>
				<th><button class="btn btn-primary glyphicon glyphicon-plus" ng-click="ctrl.edit()"/></th>
				<th>First name</th>
				<th>Last name</th>
				<th>e-mail</th>
				<th>Roles</th>
				<th>Projects</th>
				<th>Tasks</th>
			</tr>
		</thead>
						
		<tbody class="tbody-default">
			<tr ng-repeat="person in ctrl.persons" ng-click="ctrl.edit(person._id)">
				<td ng-bind="person._id" scope="row" style="width: 1px"></td>
				<td ng-bind="person.firstName"></td>
				<td ng-bind="person.lastName"></td>
				<td ng-bind="person.email"></td>
				<td ng-bind="person.roles"></td>
				<td>
					<ul>
						<li ng-repeat="project in ctrl.projects" ng-if="person._id == project.managerId" ng-bind="project.name"></li>
					</ul>
				</td>
				<td>
					<ul>
						<li ng-repeat="task in ctrl.tasks" ng-if="ctrl.getTask(person._id,task.workersIds)" ng-bind="task.description"></li>
					</ul>
				</td>
			</tr>
		</tbody>
						
	</table>
</div>